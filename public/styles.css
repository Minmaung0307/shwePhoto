/* --------------------------
   Layout variables & topbar
---------------------------*/
:root {
  --topbar-h: 56px; /* single source of truth for header height */
}

/* match .topbar's actual height */
.topbar { min-height: var(--topbar-h); }

/* use the same offset for sidebar sticky */
.side {
  top: calc(var(--topbar-h) + 8px);
}

/* content safety space on small screens when drawer opens */
@media (max-width: 900px) {
  .content { padding-bottom: 12px; }
  .side {
    top: var(--topbar-h);
    box-shadow: 0 -10px 30px rgba(0,0,0,.35);
    backdrop-filter: blur(6px);
    will-change: transform;
  }
}

/* --------------------------
   Buttons & states
---------------------------*/
.btn {
  transition: border-color .15s ease, transform .06s ease;
}
.btn:active {
  transform: translateY(1px);
}
.btn:disabled,
.gated-pro .btn:disabled,
.gated-pro input:disabled,
.gated-pro select:disabled {
  opacity: .45;
  cursor: not-allowed;
  filter: grayscale(10%);
}

/* Focus ring for accessibility */
.btn:focus-visible,
.input:focus-visible,
.file-label:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

/* Make ghost buttons visible on hover */
.btn.ghost:hover {
  border-color: #2a2e3a;
  background: rgba(255,255,255,.03);
}

/* Active-style for nav groups already present; add subtle shadow */
.btn.active {
  outline: 2px solid var(--accent);
  box-shadow: 0 0 0 2px rgba(93,169,233,.15) inset;
}

/* --------------------------
   Sidebar section polish
---------------------------*/
.side { scroll-padding-top: 12px; }
.side-sec { margin-bottom: 12px; }
.sec-title { font-weight: 700; margin: 8px 0 6px; }

/* --------------------------
   Stage / overlays
---------------------------*/
.stage { position: relative; min-height: 260px; }
.overlay { touch-action: none; }
.textbox { 
  /* ensure readable on dark bg if user picks light colors */
  text-shadow: 0 1px 2px rgba(0,0,0,.6);
}

/* --------------------------
   Reduced motion
---------------------------*/
@media (prefers-reduced-motion: reduce) {
  .btn, .side { transition: none !important; }
}